# cogs / exploit.py
import random

import discord
from discord import Embed
from discord.ext import commands
import time


class Exploit(commands.Cog):
    def __init__(self, client):
        self.client = client
    
    servers=[1039953198359781446,917901239306575902,994325308071223347]

    @commands.hybrid_command()
    async def e_loop(self, ctx, iter_start: int, iter_end: int, iter_steps: int, target: discord.User):
        if ctx.guild.id in self.servers:
    
            if ctx.author.id == 689522335119966258:
                string = "||​||||​||"
                # await ctx.message.delete()
                for i in range(iter_start, iter_end, iter_steps):
                    message = f"{str(i)} {string * i} <@{target.id}>"
                    if len(message) < 2000:
                        await ctx.send(message)
                    else:
                        await ctx.send(f"{i} Message too big. Rip")
                    time.sleep(1)

    @commands.hybrid_command()
    async def exploit(self, ctx, iter_end: int, target: discord.User):
        if ctx.author.id == 689522335119966258 and ctx.guild.id in self.servers:
            string = "||​||||​||"
            # await ctx.message.delete()
            message = f"{str(iter_end)} {string * iter_end} <@{target.id}>"
            if len(message) < 2000:
                await ctx.send(message)
            else:
                await ctx.send(f"{iter_end} Message too big. Rip")
            time.sleep(1)




async def setup(client):
    await client.add_cog(Exploit(client))
